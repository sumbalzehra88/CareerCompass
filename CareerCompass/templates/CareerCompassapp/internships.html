{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Internships - CareerCompass</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --primary-blue: #00b4d8;
      --primary-dark: #0077b6;
      --primary-darker: #005577;
      --accent-blue: #014970;
      --background-light: #CDFCFF;
      --background-medium: #B2FAFF;
      --text-dark: #1a202c;
      --text-medium: #2d3748;
      --text-light: #4a5568;
      --white: #ffffff;
      --shadow-sm: 0 4px 6px rgba(0,0,0,0.05);
      --shadow-md: 0 8px 25px rgba(0,0,0,0.1);
      --shadow-lg: 0 20px 40px rgba(0,0,0,0.08);
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--background-light) 0%, var(--background-medium) 100%);
    }

    .container {
      max-width: 1455px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Navbar - Same as Landing Page */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      margin-bottom: 0;
      background: var(--white);
      border-radius: 20px;
      box-shadow: var(--shadow-sm);
      height: 50px;
      overflow: hidden;
    }

    .logo {
      display: flex;
      align-items: center;
      font-size: 28px;
      font-weight: 700;
      color: var(--text-dark);
      text-decoration: none;
      transition: transform 0.3s ease;
      height: 100%;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    .logo-icon {
      width: 300px;
      height: 300px;
      margin-right: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-top: 85px;
    }

    .logo-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .nav-menu {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .nav-menu a {
      color: var(--text-dark);
      text-decoration: none;
      font-weight: 500;
      font-size: 16px;
      transition: all 0.3s ease;
      padding: 8px 16px;
      border-radius: 20px;
    }

    .nav-menu a:hover {
      background: rgba(0, 180, 216, 0.1);
      color: var(--primary-dark);
    }

    /* Filters */
    .filters {
      display: flex;
      justify-content: center;
      margin: 20px;
      gap: 20px;
      flex-wrap: wrap;
    }

    select, input[type="text"] {
      padding: 16px 20px;
      border-radius: 12px;
      border: 2px solid rgba(0, 180, 216, 0.2);
      min-width: 240px;
      box-shadow: var(--shadow-sm);
      background: var(--white);
      color: var(--text-dark);
      font-size: 16px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      transition: all 0.3s ease;
    }

    select:focus, input[type="text"]:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 4px rgba(0, 180, 216, 0.1);
    }

    input[type="text"]::placeholder {
      color: var(--text-light);
    }

    select option {
      color: var(--text-dark);
    }

    /* Page Heading */
    .page-heading {
      text-align: center;
      color: var(--text-dark);
      font-size: 28px;
      font-weight: bold;
      margin: 10px 0 0;
    }

    /* Internship Grid */
    .internships {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      padding: 30px;
    }

    @media (max-width: 992px) {
      .internships {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .internships {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--white);
      padding: 20px;
      border-radius: 20px;
      box-shadow: var(--shadow-md);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-blue);
    }

    .card h3 {
      margin: 0;
      font-size: 18px;
      color: var(--text-dark);
    }

    .company {
      font-weight: bold;
      margin: 5px 0 10px;
      color: var(--text-medium);
    }

    .tags span {
      background: linear-gradient(135deg, rgba(0, 180, 216, 0.1), rgba(0, 180, 216, 0.05));
      border: 1px solid rgba(0, 180, 216, 0.3);
      border-radius: 20px;
      padding: 6px 12px;
      margin: 3px;
      display: inline-block;
      font-size: 12px;
      color: var(--primary-dark);
      box-shadow: var(--shadow-sm);
    }

    .deadline {
      color: #dc2626;
      font-size: 14px;
      margin: 10px 0;
      font-weight: 600;
    }

    .btn {
      background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
      color: var(--white);
      padding: 12px 24px;
      border-radius: 50px;
      text-decoration: none;
      font-size: 14px;
      font-weight: 700;
      display: inline-block;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 180, 216, 0.3);
    }

/* ===== MODERN APPLY MODAL ===== */
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  animation: fadeIn 0.2s ease-in-out;
}

.modal-content {
  background: #ffffff;
  border-radius: 20px;
  padding: 40px 30px;
  width: 420px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  animation: slideUp 0.3s ease-out;
  position: relative;
}

.modal-content h2 {
  text-align: center;
  color: #1a202c;
  margin-bottom: 20px;
  font-weight: 700;
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 18px;
}

.form-group label {
  font-weight: 600;
  margin-bottom: 6px;
  color: #2d3748;
}

.form-group input,
.form-group textarea {
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  padding: 10px 14px;
  font-size: 15px;
  transition: border 0.2s ease;
}

.form-group input:focus,
.form-group textarea:focus {
  border-color: #00b4d8;
  outline: none;
  box-shadow: 0 0 5px rgba(0,180,216,0.2);
}

.btn {
  width: 100%;
  text-align: center;
  border: none;
  border-radius: 30px;
  background: linear-gradient(135deg, #00b4d8, #0077b6);
  color: #fff;
  font-weight: 600;
  padding: 12px 0;
  cursor: pointer;
  transition: all 0.3s ease;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0,180,216,0.3);
}

.close-btn {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 20px;
  cursor: pointer;
  color: #555;
  transition: color 0.2s ease;
}

.close-btn:hover {
  color: #0077b6;
}

/* Smooth animations */
@keyframes fadeIn {
  from { opacity: 0; } to { opacity: 1; }
}
@keyframes slideUp {
  from { transform: translateY(40px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* âœ… Isolated style for the Apply button inside the modal */
.apply-btn {
  background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: 0.3s;
  display: inline-block;
  width: auto;
}

.apply-btn:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
}


    /* Footer */
    .footer {
      background: var(--accent-blue);
      color: var(--white);
      text-align: center;
      padding: 40px 20px;
      margin-top: 60px;
      font-size: 14px;
      font-weight: 500;
      border-radius: 20px;
      box-shadow: var(--shadow-md);
    }

    .footer p {
      margin: 0;
    }

    .footer-links {
      margin-top: 20px;
      display: flex;
      gap: 30px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--white);
      text-decoration: none;
      opacity: 0.9;
      transition: all 0.3s ease;
    }

    .footer-links a:hover {
      opacity: 1;
      transform: translateY(-2px);
    }

  </style>
</head>

<body>
  <div class="container">
    <!-- Navbar - Same as Landing Page -->
    <header class="header">
      <a href="{% url 'home' %}" class="logo">
        <div class="logo-icon"><img src="{% static 'CareerCompassapp/logo.png' %}" alt="CC Logo"></div>
      </a>
      <nav class="nav-menu">
        <a href="{% url 'home' %}">Home</a>
        <a href="#mission">Mission</a>
        <a href="{% url 'contact' %}">Contact</a>
        <a href="{% url 'dashboard' %}">Dashboard</a>
      </nav>
    </header>
  </div>

  <!-- Page Heading -->
  <h2 class="page-heading">Internships</h2>

<form method="get" class="filters">
<select id="locationFilter" name="location">
    <option value="">Select Location</option>
    <option value="USA" {% if request.GET.location == "USA" %}selected{% endif %}>USA</option>
    <option value="UK" {% if request.GET.location == "UK" %}selected{% endif %}>UK</option>
    <option value="Pakistan" {% if request.GET.location == "Pakistan" %}selected{% endif %}>Pakistan</option>
    <option value="Remote" {% if request.GET.location == "Remote" %}selected{% endif %}>Remote</option>
    <option value="Canada" {% if request.GET.location == "Canada" %}selected{% endif %}>Canada</option>
    <option value="Germany" {% if request.GET.location == "Germany" %}selected{% endif %}>Germany</option>
  </select>

<select id="stipendFilter" name="stipend">
    <option value="">Select Stipend</option>
    <option value="500-800" {% if request.GET.stipend == "500-800" %}selected{% endif %}>500-800</option>
    <option value="800-1200" {% if request.GET.stipend == "800-1200" %}selected{% endif %}>800-1200</option>
    <option value="1200+" {% if request.GET.stipend == "1200+" %}selected{% endif %}>1200+</option>
  </select>

  <input type="text"
         name="search"
         placeholder="Search by skills or company"
         value="{{ request.GET.search|default:'' }}"
         style="flex:1;">

  <button type="submit" class="apply-btn">Search</button>
</form>


  <!-- Internships Grid -->
<div class="internships" id="internshipList">
  {% for internship in internships %}
  <div class="card"
       data-location="{{ internship.location }}"
       data-stipend="{{ internship.stipend }}"
       data-tags="{{ internship.skills_required }}"
       data-company="{{ internship.company_name }}">
    <h3>{{ internship.title }}</h3>
    <p class="company">{{ internship.company_name }}</p>
    <div class="tags">
      {% for skill in internship.skills_required.split %}
      <span>{{ skill }}</span>
      {% endfor %}
    </div>
    <p>{{ internship.location }} &nbsp; | &nbsp; ${{ internship.stipend }}/month</p>
    <p class="deadline">Deadline: {{ internship.deadline }}</p>
    <p>{{ internship.description }}</p>


  </div>
  {% empty %}
  <p>No internships available at the moment.</p>
  {% endfor %}
</div>

<div class="pagination" style="text-align:center; margin-top: 20px;">
  {% if internships.has_previous %}
    <a href="?page={{ internships.previous_page_number }}&search={{ search }}&location={{ location }}&stipend={{ stipend }}" class="apply-btn">Previous</a>
  {% endif %}

  <span>Page {{ internships.number }} of {{ internships.paginator.num_pages }}</span>

  {% if internships.has_next %}
    <a href="?page={{ internships.next_page_number }}&search={{ search }}&location={{ location }}&stipend={{ stipend }}" class="apply-btn">Next</a>
  {% endif %}
</div>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 CareerCompass. All rights reserved.</p>
    <div class="footer-links">
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'contact' %}">Contact</a>
      <a href="{% url 'dashboard' %}">Dashboard</a>
    </div>
  </footer>

  


/<!-- JS for filtering + modal -->
<script>
  const searchInput = document.getElementById("searchInput");
  const locationFilter = document.getElementById("locationFilter");
  const stipendFilter = document.getElementById("stipendFilter");
  const cards = document.querySelectorAll(".card");

  // ðŸ”¹ Filter logic
  function filterInternships() {
    const searchValue = searchInput.value.toLowerCase();
    const locationValue = locationFilter.value;
    const stipendValue = stipendFilter.value;

    cards.forEach(card => {
      const tags = card.getAttribute("data-tags")?.toLowerCase() || "";
      const company = card.getAttribute("data-company")?.toLowerCase() || "";
      const location = card.getAttribute("data-location") || "";
      const stipend = parseInt(card.getAttribute("data-stipend")) || 0;

      let match = true;

      if (locationValue && location !== locationValue) match = false;

      if (stipendValue) {
        if (stipendValue === "500-800" && !(stipend >= 500 && stipend <= 800)) match = false;
        if (stipendValue === "800-1200" && !(stipend >= 800 && stipend <= 1200)) match = false;
        if (stipendValue === "1200+" && stipend < 1200) match = false;
      }

      if (searchValue && !tags.includes(searchValue) && !company.includes(searchValue))
        match = false;

      card.style.display = match ? "block" : "none";
    });
  }

  // ðŸ”¹ Redirect logic instead of modal
document.querySelectorAll(".card").forEach(card => {
  card.addEventListener("click", () => {
    const title = card.querySelector("h3").innerText.trim();
    const encodedTitle = encodeURIComponent(title);
    window.open(`/internship/${encodeURIComponent(title)}/`, '_blank');
  });
});


  // ðŸ”¹ Bind filter events
  searchInput.addEventListener("input", filterInternships);
  locationFilter.addEventListener("change", filterInternships);
  stipendFilter.addEventListener("change", filterInternships);
</script>
</body>
</html>
